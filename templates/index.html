{% extends "base.html" %}

{% block title %}Homepage - FLYTAU{% endblock %}

{% block content %}
<section class="card">
  <h1>Welcome to FLYTAU 锔</h1>

  {% if user %}
    <p>
      Hello <b>{{ user.customer_first_name }}</b> <br>
      You are connected as<span class="muted">{{ user.customer_email }}</span>
    </p>

    <p class="muted">
       驻砖专 砖 住 砖 驻砖 住转 / 转 / 住 (住祝 砖).
    </p>

    <div class="row">
      <a class="btn btn-outline" href="{{ url_for('logout') }}">Logout</a>
    </div>
  {% endif %}
</section>

<div class="board">
  <!-- Search row -->
  <form class="board-search" method="get" action="{{ url_for('book') }}">
    <div class="board-field">
      <label>From City</label>
      <input type="text" name="origin" value="{{ origin or '' }}" placeholder="From City" required>
    </div>

    <div class="board-field">
      <label>To City</label>
      <input type="text" name="destination" value="{{ destination or '' }}" placeholder="To City" required>
    </div>

    <div class="board-field">
      <label>Date</label>
      <input type="date" name="date" value="{{ date or '' }}" required>
    </div>

    <button class="board-btn" type="submit">Search</button>
  </form>

  <!-- Results table -->
  <div class="board-table-wrap">
    <table class="board-table">
      <thead>
        <tr>
          <th>Flight No.</th>
          <th>From City</th>
          <th>To City</th>
          <th>Date</th>
          <th>Time</th>
          <th>From Price</th>
          <th>Book</th>
        </tr>
      </thead>

      <tbody>
        {% if flights and flights|length > 0 %}
          {% for f in flights %}
          <tr>
            <td>{{ f.flight_id }}</td>
            <td>{{ f.origin_airport }}</td>
            <td>{{ f.destination_airport }}</td>
            <td>{{ f.takeoff_date }}</td>
            <td>{{ f.takeoff_time }}</td>
            <td>{{ f.from_price }}</td>
            <td>
              <a class="book-btn" href="{{ url_for('flight_details', flight_id=f.flight_id) }}">Book</a>
            </td>
          </tr>
          {% endfor %}
        {% else %}
          <tr>
            <td colspan="7" class="empty-row">No flights found. Try searching.</td>
          </tr>
        {% endif %}
      </tbody>
    </table>
  </div>

  <!-- Pagination (UI only for now) -->
  <div class="board-pager">
    <button class="pager-btn" type="button" disabled>Previous</button>
    <button class="pager-btn" type="button" disabled>Next</button>
  </div>
</div>

{% endblock %}