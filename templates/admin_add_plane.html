{% extends "base.html" %}
{% block title %}Add Plane{% endblock %}

{% block content %}
<section class="board narrow-board">
  <h2 style="text-align: center;">Add Plane</h2>

  <form method="post" class="form" style="margin-top:12px;">

    <label class="field-label">Plane ID</label>
    <input class="field-input" name="plane_id" placeholder="e.g. P0001" required>

    <label class="field-label">Size</label>
    <select class="field-input" name="plane_size" id="plane_size" required>
      <option value="Small">Small</option>
      <option value="Large">Large</option>
    </select>

    <label class="field-label">Manufacturer</label>
    <select class="field-input" name="plane_manufacturer" required>
      <option value="Boeing">Boeing</option>
      <option value="Airbus">Airbus</option>
      <option value="Dassault">Dassault</option>
    </select>

    <label class="field-label">Purchase Date</label>
    <input class="field-input" type="date" name="purchase_date" required>

    <hr style="margin:18px 0; opacity:0.35;">

    <!-- âœ… Cabin Layout Boxes -->
    <div style="display:grid; grid-template-columns: 1fr 1fr; gap:12px;">

      <!-- Economy -->
      <div class="card" style="padding:8px 12px 12px 12px; margin-top: 18px;">
        <b>Economy</b>

        <label class="field-label">Rows</label>
        <input class="field-input" type="number" min="1"
               name="econ_rows" id="econ_rows" required>

        <label class="field-label">Columns</label>
        <input class="field-input" type="number" min="1"
               name="econ_cols" id="econ_cols" required>
      </div>

      <!-- Business (shown only for Large) -->
      <div class="card" id="businessCard" style="padding:8px 12px 12px 12px; margin-top: 18px;">
        <b>Business</b>

        <label class="field-label">Rows</label>
        <input class="field-input" type="number" min="1"
               name="bus_rows" id="bus_rows">

        <label class="field-label">Columns</label>
        <input class="field-input" type="number" min="1"
               name="bus_cols" id="bus_cols">
      </div>

    </div>

    <div style="justify-content:center; display:flex; gap:10px; margin-top:12px;">
      <button class="btn" type="submit">Save</button>
    </div>

  </form>
</section>

<script>
document.addEventListener("DOMContentLoaded", () => {
  const sizeSelect   = document.getElementById("plane_size");
  const businessCard = document.getElementById("businessCard");
  const busRows      = document.getElementById("bus_rows");
  const busCols      = document.getElementById("bus_cols");

  function updateBusinessVisibility() {
    const size = sizeSelect.value;
    const isLarge = (size === "Large");

    if (isLarge) {
      businessCard.style.display = "";
      busRows.disabled = false;
      busCols.disabled = false;
      busRows.required = true;
      busCols.required = true;
    } else {
      businessCard.style.display = "none";
      busRows.value = "";
      busCols.value = "";
      busRows.disabled = true;
      busCols.disabled = true;
      busRows.required = false;
      busCols.required = false;
    }
  }

  sizeSelect.addEventListener("change", updateBusinessVisibility);
  updateBusinessVisibility();
});
</script>
{% endblock %}
